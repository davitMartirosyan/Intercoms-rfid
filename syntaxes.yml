{
    do {
      Get Result Set
      while (Get Result) {
        Process Result
      }
    } while (Get More Result Sets);


    stmt->execute("SELECT * FROM intercoms");
    std::unique_ptr<sql::ResultSet> res;
    // std::unique_ptr<sql::ResultSet> res(stmt->executeQuery("SELECT * FROM domofon"));
    // cout << "ID"
    do
    {
        res.reset(stmt->getResultSet());
        while(res->next())
        {
            cout << res->getInt("id") << " " 
                << res->getString("qusers") << " "
                << res->getString("addr") << " " << endl;
        }
    } while (stmt->getMoreResults());
}


    string url(argc >= 2 ? argv[1] : HOST);
    const string user(argc >= 3 ? argv[2] : USER);
    const string pass(argc >= 4 ? argv[3] : PASS);
    const string database(argc >= 5 ? argv[4] : DB);
    cout << "Connector/C++ tutorial framework..." << endl;
    cout << endl;

stmt->execute("SELECT * FROM intercoms");
// std::unique_ptr<sql::ResultSet> res;
// // std::unique_ptr<sql::ResultSet> res(stmt->executeQuery("SELECT * FROM domofon"));
// // cout << "ID"
// do
// {
//     res.reset(stmt->getResultSet());
//     while(res->next())
//     {
//         cout << res->getInt("id") << " " 
//              << res->getString("qusers") << " "
//              << res->getString("addr") << " " << endl;
//     }
// } while (stmt->getMoreResults());


  sql::Driver* driver = get_driver_instance();
        std::unique_ptr<sql::Connection> con(driver->connect(url, user, pass));
        con->setSchema(database);
        std::unique_ptr<sql::Statement> stmt(con->createStatement());




 sql::Driver *driver;
    sql::Connection *con;
    sql::Statement *stmt;
    sql::ResultSet *res;
    try
    {
        driver = get_driver_instance();
        con = driver->connect(HOST, USER, PASS);
        con->setSchema(DB);
        stmt = con->createStatement();
        res = stmt->executeQuery("SELECT * FROM users");
        while(res->next())
        {
            std::cout << res->getString("fname") << " " << res->getString("lname");
            std::cout << std::endl;
        }
    }
    catch(sql::SQLException &e)
    {
        std::cout << "# ERR: SQLException in " << __FILE__;
        std::cout << "(" << __FUNCTION__ << ") on Line " << __LINE__ << std::endl;
        std::cout << "# ERR: " << e.what();
        std::cout << " (MySQL error code: " << e.getErrorCode();
        std::cout << ", SQLState: " << e.getSQLState() << " )" << std::endl;
        return EXIT_FAILURE;
    }